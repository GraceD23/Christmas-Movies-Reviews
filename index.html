---
layout: default
---

<header class="header">
  <img src="{{ 'assets/img/header-movies.png' | relative_url }}"
       alt="Movie Review Header">
</header>

<h2 class="section-title">5 Star Films</h2>

<div class="slider" aria-label="5 Star Films slider">
  {% assign five_star = site.reviews | where_exp: "r", "r.rating == 5" %}
  {% for r in five_star %}
    <article class="polaroid polaroid--slider" data-year="{{ r.year }}">

      <div class="poster-frame">
        <img class="poster"
             src="{{ r.poster | relative_url }}"
             alt="{{ r.title }} poster">
      </div>

      <h3 class="movie-title">{{ r.title }}</h3>

      <!-- ⭐ STARS (5-star slider) -->
      <div class="stars" aria-label="Rating {{ r.rating }} out of 5">
        {% include stars.html rating=r.rating %}
      </div>

      <div class="review-wrap">
        <div class="review-text js-review">
          {{ r.content | markdownify }}
        </div>

        <button class="more-btn js-more"
                type="button"
                aria-expanded="false">
          …more
        </button>
      </div>

    </article>
  {% endfor %}
</div>

<div class="year-tabs" aria-label="Year tabs">
  <button class="year-tab year-tab--2024"
          type="button"
          data-year="2024">
    2024
  </button>
  <button class="year-tab year-tab--2025"
          type="button"
          data-year="2025">
    2025
  </button>
</div>

<div class="grid-wrap">
  <section id="yearGrid"
           class="grid is-hidden"
           aria-label="Movie reviews grid">

    {% assign items = site.reviews | sort: "date" | reverse %}
    {% for r in items %}
      <article class="polaroid" data-year="{{ r.year }}">

        <div class="poster-frame">
          <img class="poster"
               src="{{ r.poster | relative_url }}"
               alt="{{ r.title }} poster">
        </div>

        <h3 class="movie-title">{{ r.title }}</h3>

        <!-- ⭐ STARS (year grid) -->
        <div class="stars" aria-label="Rating {{ r.rating }} out of 5">
          {% include stars.html rating=r.rating %}
        </div>

        <div class="review-wrap">
          <div class="review-text js-review">
            {{ r.content | markdownify }}
          </div>

          <button class="more-btn js-more"
                  type="button"
                  aria-expanded="false">
            …more
          </button>
        </div>

      </article>
    {% endfor %}
  </section>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  /* MORE / LESS TOGGLE */
  document.querySelectorAll(".polaroid").forEach(card => {
    const text = card.querySelector(".js-review");
    const btn  = card.querySelector(".js-more");
    if (!text || !btn) return;

    requestAnimationFrame(() => {
      if (text.scrollHeight <= text.clientHeight + 2) {
        btn.classList.add("is-hidden");
      }
    });

    btn.addEventListener("click", () => {
      const expanded = text.classList.toggle("is-expanded");
      btn.textContent = expanded ? "less" : "…more";
      btn.setAttribute("aria-expanded", expanded);
    });
  });

  /* YEAR FILTER */
  const tabs = document.querySelectorAll(".year-tab");
  const grid = document.getElementById("yearGrid");
  const cards = grid.querySelectorAll(".polaroid");

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      const year = tab.dataset.year;
      grid.classList.remove("is-hidden");

      tabs.forEach(t => t.classList.remove("is-active"));
      tab.classList.add("is-active");

      cards.forEach(card => {
        card.style.display =
          card.dataset.year === year ? "block" : "none";
      });
    });
  });

});
</script>
